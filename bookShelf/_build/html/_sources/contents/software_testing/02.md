
# 02.基本的な概念

技法の前に重要な概念について整理します。

ソフトウェアテスト技法で重要な概念はおおよそ以下の通りです。
- バグの量はシステムの複雑度に対して線形ではない
- 網羅性
- ピンポイント
- テスト設計アプローチ

## 心構えと網羅性とピンポイント

「バグの量はシステムの複雑度に対して線形ではない」とは言葉通りの重要な心構えです。システムが複雑になるほどメソッドの組み合わせは膨大になりますし、またテストするべきケースも増えます。そのため、システムを作ることはバグを作ることと同じですし、また非線形に増大するという前提を持ってテストに臨むことが重要です。

網羅性とはテストの抜け漏れをなるべく無くすことです。エンジニアリングでよく聞く言葉として「漏れなく重複なく」という物がありますが、テストでは「漏れなく」を重視します。

ピンポイントとは怪しいところを入念に調べることです。境界値がある場合、怪しいところは境界値付近であるように、バグの生じやすい箇所を入念に調べます。


ソフトウェアテストの目標は「テストケースはより少なく、見つけるバグはより多く」です。
網羅性を維持しつつ、テストケースを減らすテスト技法も怪しいところを詳しく調べるテスト技法のどちらも大事です。


怪しいところを調べる際には「テストの観点を複数持つ」ことが重要です。
例えば次のような観点を持つことです。
- 具体的な例の「間」、「逆」、「類推」、「外」を考える
    - [1,2]の間なら1.5
    - [1,2]の逆なら負の数
    - [1,2]の類推なら0はどうか
    - [1,2]の外なら3はどうか
    - [1,2]の外なら文字列はどうか
- 意地悪な条件を考える
    - 最悪な入力
- 「知っている」「当たり前」と思っているところを疑う
    - 数字の入力だけど文字列や記号が来るかも

## テスト設計アプローチ
次のようなメソッドについてテストを行う場合、どのようなケースと用意すればいいか？
```
def cubed(n :int) -> int:
    return n * n * n
```

いくつか出してみます。
- 整数値が渡された場合のテスト
- 実数値が渡された場合のテスト
- 複素数が渡された場合のテスト
- 文字列が渡された場合のテスト
- 例えば$10^{8}$のような大きい数が渡された場合のテスト
- 例えば$10^{-8}$のような小さい数が渡された場合のテスト

絶対これをやればOKという物はなく、どのテストもケースバイケースで判断が必要です。

- どのような機能を求めるのか
- どのような場面で使うか（精度はどれくらい求められるか)
- テストにどれくらいコストをかけるか

その際の判断基準として**テスト設計アプローチ**があります。


テスト設計アプローチには以下2つがあります。
1. 契約によるテスト
2. 防御的テスト

## 契約によるテスト
契約によるテストとは、事前条件の範囲内だけでテストを行うアプローチです。

※プログラムのメソッド・関数をソフトウェアテストの用語でモジュールと言います。

事前条件とは、モジュールの引数やモジュールが呼び出される際に満たすべき条件のことです。
例えば、上記のモジュールの引数として「区間[1,100]の整数しか渡されない」は事前条件です。

## 防御的テスト
防御的テストとは、事前条件の範囲外もテストを行うアプローチです。

例えば、上記のモジュールの事前条件は「区間[1,100]の整数しか渡されない」ですが、追加のテストケースとして「0」「101」また文字列の入力も行い、例外やエラー処理が動作することを確認することです。


大事なのは「どちらのアプローチでテストするのか？」を明確にした上でテストを実行することです。


これまでを整理しましょう。

- テスト技法はより多くのバグを発見するための手段
- テストを行う前にどのようなアプローチをとるかを明確にすると指針になる
